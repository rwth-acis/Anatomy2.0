<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">

<html lang="en">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta name="Author" content="Michalis Kamburelis">

<meta name="Language" content="English">

<title>Navigation component - implementation status - Castle Game Engine</title>


<!--
  This is unclean, but it's more comfortable to keep below CSS
  directly inside HTML page. This is in kambi_common.php,
  that should be useful for both michalis.ii and castle-engine.sf.net webpages,
  and must be suitable also for offline documentation in castle-engine programs.
-->
<!-- link type="text/css" rel="stylesheet" media="all"  href="kambi-php-lib/kambi_common.css" -->

<style type="text/css"><!--
body { background: white; font-family: sans-serif; }

dt { font-weight: bold; }
div.page_footer { }
span.page_copyright { font-size: smaller }

span.version_number { font-size: small }

div.quick_links_bottom_line { text-align: left; }

.rss_link {
  float: right;
  background: red;
  padding: 0.3em;
  border: thin outset black;
}

.rss_link a {
  color: white;
  font-weight: bold
}
--></style>


<link rel="alternate" type="application/rss+xml"
  title="Castle Game Engine - News Feed"
  href="http://castle-engine.sourceforge.net/news_feed.php">

<link type="text/css" rel="stylesheet" media="all" href="castle-engine.css">
<link type="text/css" rel="stylesheet" href="colorbox/example3/colorbox.css">

<script type="text/javascript" src="castle-engine.js"></script>
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="colorbox/jquery.colorbox-min.js"></script>

<style type="text/css"><!--
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for delphi
 * CSS class: sourcecode, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.delphi.sourcecode .de1, .delphi.sourcecode .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;}
.delphi.sourcecode  {font-family:monospace;}
.delphi.sourcecode .imp {font-weight: bold; color: red;}
.delphi.sourcecode li, .delphi.sourcecode .li1 {font-weight: normal; vertical-align:top;}
.delphi.sourcecode .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.delphi.sourcecode .li2 {font-weight: bold; vertical-align:top;}
.delphi.sourcecode .kw1 {color: #000000; font-weight: bold;}
.delphi.sourcecode .kw2 {color: #000000; font-weight: bold;}
.delphi.sourcecode .kw3 {color: #000066;}
.delphi.sourcecode .kw4 {color: #000066; font-weight: bold;}
.delphi.sourcecode .co1 {color: #808080; font-style: italic;}
.delphi.sourcecode .co2 {color: #008000; font-style: italic;}
.delphi.sourcecode .coMULTI {color: #808080; font-style: italic;}
.delphi.sourcecode .es0 {color: #ff0000; font-weight: bold;}
.delphi.sourcecode .br0 {color: #000066;}
.delphi.sourcecode .sy0 {color: #000066;}
.delphi.sourcecode .sy1 {color: #000066;}
.delphi.sourcecode .sy2 {color: #000066;}
.delphi.sourcecode .sy3 {color: #000066;}
.delphi.sourcecode .st0 {color: #ff0000;}
.delphi.sourcecode .nu0 {color: #0000ff;}
.delphi.sourcecode .me1 {color: #006600;}
.delphi.sourcecode .re0 {color: #0000cc;}
.delphi.sourcecode .re1 {color: #ff0000;}
.delphi.sourcecode .ln-xtra, .delphi.sourcecode li.ln-xtra, .delphi.sourcecode div.ln-xtra {background-color: #ffc;}
.delphi.sourcecode span.xtra { display:block; }
 -->
</style>

<script type="text/javascript">
/* <![CDATA[ */
    (function() {
        var s = document.createElement('script'), t = document.getElementsByTagName('script')[0];
        s.type = 'text/javascript';
        s.async = true;
        s.src = 'http://api.flattr.com/js/0.6/load.js?mode=auto';
        t.parentNode.insertBefore(s, t);
    })();
/* ]]> */
</script><script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
  </head>
<body>


  <div class="header">
    <!--img class="header_icon" src="images/header_icon.png" alt="Castle Game Engine icon" /-->
    <div class="header_title"><a href="http://castle-engine.sourceforge.net/index.php">Castle Game Engine</a></div>
    
    <table class="header_menu">
      <tr>
        <td colspan="15" class="higher higher_left">&larr; Users</td>
        <td colspan="6" class="higher higher_right">Developers &rarr;</td>
      </tr>
      <tr><td class="lower_separator"><div>&nbsp;</div></td><td class="lower"><a href="http://castle-engine.sourceforge.net/index.php">Intro</a></td><td class="lower_separator"><div>&nbsp;</div></td><td class="lower"><a href="http://castle-engine.sourceforge.net/news.php">News</a></td><td class="lower_separator"><div>&nbsp;</div></td><td class="lower"><a href="http://castle-engine.sourceforge.net/view3dscene.php" title="VRML / X3D browser, and a viewer for other 3D model formats">view3dscene</a></td><td class="lower_separator"><div>&nbsp;</div></td><td class="lower"><a href="http://castle-engine.sourceforge.net/castle.php" title="First-person perspective game, in a dark fantasy setting">The Castle</a></td><td class="lower_separator"><div>&nbsp;</div></td><td class="lower"><a href="http://castle-engine.sourceforge.net/all_programs.php" title="All the games and tools using our 3D engine">All Programs</a></td><td class="lower_separator"><div>&nbsp;</div></td><td class="lower"><a href="http://castle-engine.sourceforge.net/forum.php" title="Ask for help, report bugs, discuss features">Forum</a></td><td class="lower_separator"><div>&nbsp;</div></td><td class="lower"><a href="http://castle-engine.sourceforge.net/donate.php">Donate</a></td><td class="lower_separator"><div>&nbsp;</div></td><td class="lower"><a href="http://castle-engine.sourceforge.net/engine.php" title="Sources and documentation for developers">Engine</a></td><td class="lower_separator"><div>&nbsp;</div></td><td class="lower"><a href="vrml_x3d.html" title="Our extensions and status of VRML/X3D implementation" id="current">VRML/X3D</a></td><td class="lower_separator"><div>&nbsp;</div></td><td class="lower"><a href="http://castle-engine.sourceforge.net/blender.php" title="Customized Blender X3D exporter">Blender</a></td><td class="lower_separator"><div>&nbsp;</div></td>
      </tr>
    </table>
  </div><table class="layout" cellspacing="0">
      <col class="content_column">
      <col class="sidebar_column">
      <tr><td class="layout content"><div class="header_breadcrumbs"><a href="http://castle-engine.sourceforge.net/index.php">Home <i>(online docs)</i></a> &#187; <a href="vrml_x3d.html">VRML / X3D support</a> &#187; <a href="x3d_implementation_status.html">Implementation status</a></div><h1>Navigation component</h1><div class="x3d_component_intro">
    <p class="paragraph_first">This component defines nodes to control the camera,
     and some effects closely related to the camera.
     <tt>NavigationInfo</tt> controls the camera behavior.
     <tt>Viewpoint</tt> and <tt>OrthoViewpoint</tt> define
     the initial camera position and rotation, and may be used to animate
     the camera. <tt>LOD</tt> allows to implement level-of-detail,
     where different versions of 3D scene are displayed depending
     on the camera distance. <tt>Collision</tt> allows to use a simpler
     geometry for collision purposes, or even to turn the collisions off
     (like a fake walls hiding secret rooms in games).
     <tt>Billboard</tt> may be used to create sprites, as it aligns
     geometry (flat or not) with respect to the camera.
     </p>
    <p class="paragraph_last">See also <a href="http://www.web3d.org/files/specifications/19775-1/V3.2/Part01/components/navigation.html">X3D specification of Navigation component</a>.</p></div>
<p>Contents:
<div class="table_of_contents"><ol>
<li><a href="#section_demos">Demos</a>
</li>
<li><a href="#section_support">Supported nodes</a>
</li>
</ol>
</div>
<h2><a name="section_demos">1. Demos</a></h2>

<p>For demos and tests of these features,
see the <tt>navigation</tt> subdirectory inside <a href="demo_models.html">our VRML/X3D demo models</a>.</p>

<h2><a name="section_support">2. Supported nodes</a></h2>

<ul>
  <li><p><tt><a href="http://www.web3d.org/files/specifications/19775-1/V3.2/Part01/components/navigation.html#Viewpoint">Viewpoint</a></tt></p>

    <p><i>Note</i>: view3dscene displays also nice menu allowing you to jump
    to any defined viewpoint, displaying viewpoints descriptions.

    <p>Animating viewpoint's position and orientation
    (directly or by it's transformations) also works perfectly.</p>

  <li><p><tt><a href="http://www.web3d.org/files/specifications/19775-1/V3.2/Part01/components/navigation.html#OrthoViewpoint">OrthoViewpoint</a></tt>
    <p>TODO: Although it's handled, some fields are ignored for now:
    jump, retainUserOffsets, centerOfRotation.

  <li><p><tt><a href="http://www.web3d.org/files/specifications/19775-1/V3.2/Part01/components/navigation.html#NavigationInfo">NavigationInfo</a></tt></p>

    <p>Nice transitions between viewpoints are supported,
    honouring <tt>transitionType</tt> and <tt>transitionTime</tt> fields.
    TODO: <tt>transitionComplete</tt> event is not generated for now.</p>

    <p>Binding different <tt>NavigationInfo</tt> nodes,
    and changing their exposed fields by events, of course works.</p>

    <p>Various details about how we handle NavigationInfo node in
    <a href="http://castle-engine.sourceforge.net/view3dscene.php">view3dscene <i>(online docs)</i></a>:
    <ul>
      <li>Note that <tt>--camera-radius</tt> command-line option overrides
        whatever was specified by <tt>avatarSize[0]</tt>.

      <li><tt>avatarSize</tt> is honoured fully:
        <ol>
          <li>First value is the camera radius,
          <li>2nd is the preferred height above the ground,
          <li>3rd is the tallest object over which you can climb.
            If this is missing (or it has value &lt;= 0) then there's no such
            limit, and you can climb as long as you can move forward
            (so you can climb the stairs with steps
            almost as high as your own height minus the camera radius;
            ignoring some other effects, like head bobbing,
            you can say that avatarSize[2] is by default like
            avatarSize[1] - avatarSize[0]).
            See TWalkCamera.ClimbHeight docs for more details about this.
        </ol>

      <li><tt>speed</tt> is honored as appropriate, it sets
        the speed in meters/second. Speed = 0.0 is also correctly
        honored (user will not be able to move in Walk/Fly modes,
        only to rotate).

      <li>navigation types fully supported are: <tt>EXAMINE</tt>, <tt>WALK</tt>,
        <tt>FLY</tt>, <tt>NONE</tt>.

        Inside the engine, the navigation paradigm is actually a little
        more flexible. You can fine-tune the rotations and gravity
        behavior by view3dscene <i>Navigation -> Walk and Fly Settings</i>
        menu.
        <!--
        For example, the difference between <tt>Walk</tt> and <tt>Fly</tt>
        is not only that the gravity if off when flying.
        It's also that in fly mode, you rotate around <i>current</i> up vector,
        not around the <i>gravity</i> up vector,
        -->

      <li>The presence of navigation type
        <tt>ANY</tt> is not important for now (view3dscene always
        shows controls to change navigation settings).
    </ul>

    <p>When no <tt>NavigationInfo</tt> node is present in the scene:
    <ul>
      <li><tt>avatarSize</tt> and <tt>speed</tt>
        are calculated based on scene's bounding box sizes, to a values that
        will hopefully "feel right".
        We try to calculate them intelligently, because simply using
        <tt>NavigationInfo</tt> defaults results in bad experience
        in many scenes.</li>

      <li><tt>headlight</tt> behaves like true,
        <tt>type</tt> behaves like <tt>[EXAMINE, ANY]</tt>,
        this follows <tt>NavigationInfo</tt> defaults.</li>
    </ul>

    <p><i>TODO</i>: <tt>visibilityLimit</tt> may be ignored if shadow
    volumes are allowed (We use frustum with z-far in infinity then.)</p>

    <p>As an extension, we support new navigation mode <tt>ARCHITECTURE</tt>.
    This is similar to the Examine mode, with controls comfortable
    for viewing models that have a sense of floor/ground in the XZ plane,
    and vertical axis in +Y.

  <li><p><tt><a href="http://www.web3d.org/files/specifications/19775-1/V3.2/Part01/components/navigation.html#LOD">LOD</a></tt>
    <p><i>Note:</i> We do not have any automatic LOD calculation implemented now,
    which means that your supplied <tt>range</tt>, and only
    your supplied <tt>range</tt>, controls which LOD is chosen.
    This means that <tt>forceTransitions</tt> value is simply ignored,
    and when <tt>range</tt> is empty, we simply always use the first
    (highest-detail) version. This is Ok, spec allows this.

  <li><p><tt><a href="http://www.web3d.org/files/specifications/19775-1/V3.2/Part01/components/navigation.html#Billboard">Billboard</a></tt></p>

    <p>Works fully.</p>

  <li><p><tt><a href="http://www.web3d.org/files/specifications/19775-1/V3.2/Part01/components/navigation.html#Collision">Collision</a></tt></p>

    <p>Most things work: grouping (<tt>children</tt> property, in particular),
    allows to control collision detection by honoring
    <tt>enabled</tt> (named <tt>collide</tt> in VRML 97) and <tt>proxy</tt>
    fields.

    <p><tt>bboxCenter/Size</tt> is currently simply ignored, our engine
    always calculates and updates the bounding boxes where needed.

    <p>TODO: collideTime and isActive out events are not implemented yet.

  <li><p><tt><a href="http://www.web3d.org/files/specifications/19775-1/V3.2/Part01/components/navigation.html#ViewpointGroup">ViewpointGroup</a></tt></p>

    <p>You can use them to create submenus in "Viewpoints" menu in
    <a href="http://castle-engine.sourceforge.net/view3dscene.php">view3dscene <i>(online docs)</i></a>:
    <tt>description</tt> and <tt>children</tt> work.
    Also, you can use this to hide some viewpoints from the menu:
    <tt>displayed</tt> field works.</p>

    <p>TODO: size/center is not honored yet. Group is displayed
    regardless of camera position. A possible workarond could be
    to use a <tt>ProximitySensor</tt> node,
    routing <tt>ProximitySensor.isActive</tt> to the <tt>displayed</tt> field...
    Except this workaround will not work too, because changing
    of the <tt>displayed</tt> field after the scene loading
    doesn't change the menu for now.</p>

    <p>TODO: retainUserOffsets is ignored.</p>
  </li>
</ul>

</td><td class="layout">
  <div class="sidebar">
    <div class="sidebar_title"><a href="vrml_x3d.html">VRML / X3D support</a></div><ul><li><a href="demo_models.html">Demo models</a></li><li><a href="x3d_extensions.html">Extensions</a><ul><li><a href="compositing_shaders.html">Compositing Shaders</a></li><li><a href="x3d_extensions_screen_effects.html">Screen Effects</a></li><li><a href="x3d_extensions_shadow_maps.html">Shadow Maps</a></li><li><a href="x3d_extensions_vrml1.html">(Old) VRML 1.0</a></li></ul></li><li><a href="x3d_implementation_status.html">Implementation status</a><ul><li><a href="x3d_implementation_core.html">Core</a></li><li><a href="x3d_implementation_time.html">Time</a></li><li><a href="x3d_implementation_networking.html">Networking</a></li><li><a href="x3d_implementation_grouping.html">Grouping</a></li><li><a href="x3d_implementation_rendering.html">Rendering</a></li><li><a href="x3d_implementation_shape.html">Shape</a></li><li><a href="x3d_implementation_geometry3d.html">Geometry3D</a></li><li><a href="x3d_implementation_geometry2d.html">Geometry2D</a></li><li><a href="x3d_implementation_text.html">Text</a></li><li><a href="x3d_implementation_sound.html">Sound</a></li><li><a href="x3d_implementation_lighting.html">Lighting</a></li><li><a href="x3d_implementation_texturing.html">Texturing</a><ul><li><a href="x3d_implementation_texturing.html#section_multi_texturing">Clarifications to X3D multi-texturing</a></li><li><a href="x3d_implementation_texturing.html#section_dds">DDS (DirectDraw Surface)</a></li></ul></li><li><a href="x3d_implementation_interpolation.html">Interpolation</a></li><li><a href="x3d_implementation_pointingdevicesensor.html">Pointing device sensor</a></li><li><a href="x3d_implementation_keydevicesensor.html">Key device sensor</a></li><li><a href="x3d_implementation_environmentalsensor.html">Environmental sensor</a></li><li>Navigation</li><li><a href="x3d_implementation_environmentaleffects.html">Environmental effects</a></li><li><a href="x3d_implementation_hanim.html">H-Anim</a></li><li><a href="x3d_implementation_nurbs.html">NURBS</a><ul><li><a href="x3d_implementation_nurbs.html#section_homogeneous_coordinates">Control points are in homogeneous coordinates</a></li></ul></li><li><a href="x3d_implementation_scripting.html">Scripting</a></li><li><a href="x3d_implementation_eventutilities.html">Event utilities</a></li><li><a href="x3d_implementation_shaders.html">Programmable shaders</a></li><li><a href="x3d_implementation_cadgeometry.html">CAD geometry</a></li><li><a href="x3d_implementation_texturing3d.html">Texturing3D</a></li><li><a href="x3d_implementation_cubemaptexturing.html">Cube map environmental texturing</a></li></ul></li><li><a href="nist_vrml_test_suite.html">NIST conformace test suite</a></li><li><a href="castle_script.html">CastleScript language reference</a></li><li><a href="kanim_format.html">Kanim (precalculated animations) file format</a></li><li><a href="x3d_time_origin_considered_uncomfortable.html">VRML / X3D time origin considered uncomfortable</a></li></ul></div></td></tr></table><script type="text/javascript">
  jQuery('a.screenshot').colorbox({opacity: 0.9, rel:'screenshot', maxWidth:'90%', maxHeight:'90%'});
</script>
  
<hr>

<div class="page_footer">

    <address>
    By Michalis Kamburelis, as part of
    <a href="http://castle-engine.sourceforge.net/">Castle Game Engine</a>.
    </address>
    
  <table><tr>

    <td><a href="http://sourceforge.net/projects/castle-engine">Hosted by SourceForge.net</a></td>

    <td><span class="page_copyright">Copyright <a href="http://michalis.ii.uni.wroc.pl/~michalis/">Michalis Kamburelis</a>.
This page is considered part of documentation of my programs,
and you are free to modify and further distribute it on terms of
<a href="http://www.gnu.org/licenses/gpl.html">GNU General Public License</a>.
</span></td>

    
  </tr></table>

  
</div>

</body>
</html>

